<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SocialFind - Prototype</title>
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        body { font-family: 'Inter', sans-serif; background-color: #F8FAFC; }
        .glass-panel { background: rgba(255, 255, 255, 0.95); backdrop-filter: blur(10px); }
        .slide-up { animation: slideUp 0.3s ease-out; }
        @keyframes slideUp { from { transform: translateY(20px); opacity: 0; } to { transform: translateY(0); opacity: 1; } }
        .pulse-ring { animation: pulse-ring 2s infinite; }
        @keyframes pulse-ring { 0% { box-shadow: 0 0 0 0 rgba(59, 130, 246, 0.7); } 70% { box-shadow: 0 0 0 10px rgba(59, 130, 246, 0); } 100% { box-shadow: 0 0 0 0 rgba(59, 130, 246, 0); } }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect } = React;

        // --- Mock Data (Simulating your Database) ---
        const INITIAL_PRODUCTS = [
            {
                id: 1,
                title: "iPhone 12 Pro Max (Pacific Blue)",
                price: 280000,
                condition: "Used",
                platform: "twitter",
                sourceUser: "@TechVendor_NG",
                location: "Lagos, Ikeja",
                image: "https://images.unsplash.com/photo-1605236453806-6ff368512188?auto=format&fit=crop&q=80&w=400",
                rawText: "Urgent sales!! iPhone 12 Pro Max, 256gb. Face ID works perfectly. Price: 280k. Location: Ikeja."
            },
            {
                id: 2,
                title: "Nike Air Jordan 1 - High",
                price: 45000,
                condition: "New",
                platform: "instagram",
                sourceUser: "@Kicks_Abj",
                location: "Abuja",
                image: "https://images.unsplash.com/photo-1552346154-21d32810aba3?auto=format&fit=crop&q=80&w=400",
                rawText: "Fresh landing. Size 42-45 available. DM for price. 45k last price. Nationwide delivery."
            },
            {
                id: 3,
                title: "Sony PlayStation 5 Console",
                price: 420000,
                condition: "New",
                platform: "twitter",
                sourceUser: "@GamerBoy_Dave",
                location: "Lagos, Lekki",
                image: "https://images.unsplash.com/photo-1606813907291-d86efa9b94db?auto=format&fit=crop&q=80&w=400",
                rawText: "PS5 Standard edition available. Brand new sealed. 420k only today. Pick up at Lekki Phase 1."
            }
        ];

        // --- Components ---

        const PlatformIcon = ({ platform }) => (
            <span className={`flex items-center justify-center w-6 h-6 rounded-full text-white text-xs ${platform === 'twitter' ? 'bg-black' : 'bg-gradient-to-tr from-yellow-400 via-red-500 to-purple-500'}`}>
                <i className={`fab fa-${platform}`}></i>
            </span>
        );

        const ProductCard = ({ product }) => (
            <div className="bg-white rounded-xl shadow-sm border border-slate-100 overflow-hidden hover:shadow-md transition-shadow cursor-pointer slide-up">
                <div className="h-48 bg-slate-100 relative">
                    <img src={product.image} alt={product.title} className="w-full h-full object-cover" />
                    <div className="absolute top-3 right-3 bg-white/90 backdrop-blur px-2 py-1 rounded-lg text-xs font-semibold text-slate-700 shadow-sm">
                        {product.condition}
                    </div>
                </div>
                <div className="p-4">
                    <div className="flex justify-between items-start mb-2">
                        <div>
                            <h3 className="font-bold text-slate-800 line-clamp-1">{product.title}</h3>
                            <div className="flex items-center gap-1 text-xs text-slate-500 mt-1">
                                <PlatformIcon platform={product.platform} />
                                <span>{product.sourceUser}</span>
                                <span>•</span>
                                <span>{product.location}</span>
                            </div>
                        </div>
                    </div>
                    <div className="mt-3 flex justify-between items-center">
                        <span className="text-lg font-bold text-emerald-600">₦{product.price.toLocaleString()}</span>
                        <button className="text-xs font-medium text-blue-600 bg-blue-50 px-3 py-1.5 rounded-full hover:bg-blue-100">
                            View Deal
                        </button>
                    </div>
                </div>
            </div>
        );

        const ImportModal = ({ isOpen, onClose, onImport }) => {
            const [step, setStep] = useState('input'); // input, processing, result
            const [url, setUrl] = useState('');
            const [logs, setLogs] = useState([]);

            if (!isOpen) return null;

            const simulateProcessing = () => {
                setStep('processing');
                setLogs([]);
                
                const steps = [
                    "Connecting to Twitter Headless Browser...",
                    "Bypassing Anti-Bot verification...",
                    "Tweet found: 'MacBook M1 Air for sale...'",
                    "Sending text to OpenAI (GPT-4)...",
                    "Extracting Price: ₦350,000...",
                    "Extracting Condition: Used...",
                    "Success!"
                ];

                steps.forEach((log, index) => {
                    setTimeout(() => {
                        setLogs(prev => [...prev, log]);
                        if (index === steps.length - 1) {
                            setTimeout(() => {
                                onImport(); 
                                onClose(); 
                                setStep('input'); 
                                setUrl('');
                                setLogs([]);
                            }, 1000);
                        }
                    }, index * 800);
                });
            };

            return (
                <div className="fixed inset-0 bg-black/40 backdrop-blur-sm z-50 flex items-center justify-center p-4">
                    <div className="bg-white rounded-2xl w-full max-w-md shadow-2xl overflow-hidden slide-up">
                        <div className="p-6 border-b border-slate-100 flex justify-between items-center">
                            <h2 className="text-lg font-bold text-slate-800">
                                {step === 'input' ? 'Import from Social' : 'AI Processing'}
                            </h2>
                            <button onClick={onClose} className="text-slate-400 hover:text-slate-600"><i className="fas fa-times"></i></button>
                        </div>

                        <div className="p-6">
                            {step === 'input' ? (
                                <>
                                    <p className="text-sm text-slate-500 mb-4">Paste a link from Twitter or Instagram. Our AI will clean it up.</p>
                                    <div className="relative mb-4">
                                        <i className="fas fa-link absolute left-3 top-3.5 text-slate-400"></i>
                                        <input 
                                            type="text" 
                                            value={url}
                                            onChange={(e) => setUrl(e.target.value)}
                                            placeholder="https://twitter.com/..." 
                                            className="w-full pl-10 pr-4 py-3 bg-slate-50 border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 transition-all"
                                        />
                                    </div>
                                    <div className="flex gap-3">
                                        <button 
                                            onClick={() => setUrl("https://twitter.com/user/status/123456")}
                                            className="flex-1 py-3 text-sm font-medium text-slate-600 bg-slate-100 rounded-xl hover:bg-slate-200 transition-colors">
                                            Auto-Fill Demo
                                        </button>
                                        <button 
                                            onClick={simulateProcessing}
                                            disabled={!url}
                                            className={`flex-1 py-3 text-sm font-bold text-white rounded-xl transition-all ${url ? 'bg-blue-600 hover:bg-blue-700 shadow-lg shadow-blue-200' : 'bg-slate-300 cursor-not-allowed'}`}>
                                            Start Import
                                        </button>
                                    </div>
                                </>
                            ) : (
                                <div className="space-y-4">
                                    <div className="flex justify-center py-4">
                                        <div className="w-16 h-16 rounded-full border-4 border-blue-100 border-t-blue-600 animate-spin"></div>
                                    </div>
                                    <div className="bg-slate-900 rounded-lg p-4 font-mono text-xs text-green-400 h-40 overflow-y-auto">
                                        {logs.map((log, i) => (
                                            <div key={i} className="mb-1">> {log}</div>
                                        ))}
                                        <div className="animate-pulse">> _</div>
                                    </div>
                                </div>
                            )}
                        </div>
                    </div>
                </div>
            );
        };

        const App = () => {
            const [products, setProducts] = useState(INITIAL_PRODUCTS);
            const [isModalOpen, setIsModalOpen] = useState(false);
            const [filter, setFilter] = useState('All');

            const handleNewImport = () => {
                const newProduct = {
                    id: products.length + 1,
                    title: "MacBook Air M1 (Silver)",
                    price: 350000,
                    condition: "Used",
                    platform: "twitter",
                    sourceUser: "@LagosGadgets",
                    location: "Lagos, Yaba",
                    image: "https://images.unsplash.com/photo-1611186871348-b1ce696e52c9?auto=format&fit=crop&q=80&w=400",
                    rawText: "MacBook Air M1 base model. 8/256. Battery cycle count 45. Clean as new. 350k non-negotiable."
                };
                setProducts([newProduct, ...products]);
            };

            return (
                <div className="min-h-screen pb-20">
                    {/* Header */}
                    <nav className="sticky top-0 z-30 bg-white/80 backdrop-blur border-b border-slate-200">
                        <div className="max-w-md mx-auto px-4 h-16 flex justify-between items-center">
                            <div className="flex items-center gap-2">
                                <div className="w-8 h-8 bg-blue-600 rounded-lg flex items-center justify-center text-white font-bold text-lg">S</div>
                                <span className="font-bold text-slate-800 text-lg tracking-tight">SocialFind</span>
                            </div>
                            <button 
                                onClick={() => setIsModalOpen(true)}
                                className="w-8 h-8 rounded-full bg-slate-900 text-white flex items-center justify-center hover:bg-slate-700 transition-colors shadow-lg shadow-slate-300">
                                <i className="fas fa-plus text-xs"></i>
                            </button>
                        </div>
                    </nav>

                    {/* Main Content */}
                    <main className="max-w-md mx-auto px-4 pt-6">
                        
                        {/* Hero Text */}
                        <div className="mb-8">
                            <h1 className="text-2xl font-bold text-slate-900 mb-2">Hidden gems from<br/>the timeline.</h1>
                            <p className="text-slate-500 text-sm">We find the best deals buried in Twitter & Instagram posts so you don't have to scroll.</p>
                        </div>

                        {/* Search/Filter Simulation */}
                        <div className="flex gap-2 mb-6 overflow-x-auto pb-2 scrollbar-hide">
                            {['All', 'Phones', 'Laptops', 'Fashion', 'Gaming'].map(cat => (
                                <button 
                                    key={cat}
                                    onClick={() => setFilter(cat)}
                                    className={`px-4 py-2 rounded-full text-xs font-medium whitespace-nowrap transition-all ${filter === cat ? 'bg-slate-900 text-white' : 'bg-white text-slate-600 border border-slate-200'}`}>
                                    {cat}
                                </button>
                            ))}
                        </div>

                        {/* Product Grid */}
                        <div className="grid gap-6">
                            {products.map(product => (
                                <ProductCard key={product.id} product={product} />
                            ))}
                        </div>

                        {/* Empty State / Bottom Text */}
                        <div className="mt-12 text-center pb-8">
                            <p className="text-xs text-slate-400">End of valid results</p>
                        </div>
                    </main>

                    <ImportModal 
                        isOpen={isModalOpen} 
                        onClose={() => setIsModalOpen(false)}
                        onImport={handleNewImport}
                    />
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>